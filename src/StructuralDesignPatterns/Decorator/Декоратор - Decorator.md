# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä - Decorator

–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π

**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä**¬†‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –æ–±—ä–µ–∫—Ç–∞–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –æ–±–æ—Ä–∞—á–∏–≤–∞—è –∏—Ö –≤ –ø–æ–ª–µ–∑–Ω—ã–µ¬†¬´–æ–±—ë—Ä—Ç–∫–∏¬ª.

---

# üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

![image.png](image.png)

1. **Component**¬†–∑–∞–¥–∞—ë—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—ë—Ä—Ç–æ–∫ –∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
2. **Concrete Component**¬†–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–ª–∞—Å—Å –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∫–æ–µ-—Ç–æ –±–∞–∑–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ—Ç–æ–º –∏–∑–º–µ–Ω—è—é—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã.
3. **Base Decorator**¬†—Ö—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –ò–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —Ç–∞–∫ –∏ –æ–¥–∏–Ω –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤. –ë–∞–∑–æ–≤—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —Å–≤–æ–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –∂–∏—Ç—å –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞—Ö.
4. **Concrete Decorators**¬†‚Äî —ç—Ç–æ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–æ–±–∞–≤–æ—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –û–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
5. **Client**¬†–º–æ–∂–µ—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –≤ –¥—Ä—É–≥–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, —Ä–∞–±–æ—Ç–∞—è —Å–æ –≤—Å–µ–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

# ‚åó –ü—Å–µ–≤–¥–æ–∫–æ–¥

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ¬†**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä**¬†–∑–∞—â–∏—â–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –¥–ª—è –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.

![image.png](image%201.png)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∫–ª–∞—Å—Å –¥–∞–Ω–Ω—ã—Ö –≤ —à–∏—Ñ—Ä—É—é—â—É—é –∏ —Å–∂–∏–º–∞—é—â—É—é –æ–±—ë—Ä—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –≤—ã–¥–∞—é—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ ‚Äî –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ —Å–∂–∞—Ç—ã–µ.

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, –∫–∞–∫ –∏ —Å–∞–º –∫–ª–∞—Å—Å –¥–∞–Ω–Ω—ã—Ö, –∏–º–µ—é—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ü–æ—ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –∫–æ–¥—É –Ω–µ –≤–∞–∂–Ω–æ, —Å —á–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å ‚Äî c ¬´—á–∏—Å—Ç—ã–º¬ª –æ–±—ä–µ–∫—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å ¬´–æ–±—ë—Ä–Ω—É—Ç—ã–º¬ª.

```
// –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
interface DataSource is
	method writeData(data)
	method readData(): data

// –û–¥–∏–Ω –∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∞–∑–æ–≤—É—é
// —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
class FileDataSource implements DataSource is 
	constructor FileDataSource(filename) { ... }

	method writeData(data) is
		// –ó–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª.

	method readData(): data is
		// –ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞.

// –†–æ–¥–∏—Ç–µ–ª—å –≤—Å–µ—Ö –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–¥ –æ–±—ë—Ä—Ç—ã–≤–∞–Ω–∏—è.
class DataSourceDecorator implements DataSource is
	protected field wrappee: DataSource

	constructor DataSourceDecorator(source: DataSource)is
		wrappee = source

	method writeData(data) is 
		wrappee.writeData(data)

	method readData(): data is
		return wrappee.readData()

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç —á—Ç–æ-—Ç–æ —Å–≤–æ—ë –∫ –±–∞–∑–æ–≤–æ–º—É
// –ø–æ–≤–µ–¥–µ–Ω–∏—é –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
class EncryptionDecorator extends DataSourceDecorator is
	method writeData(data) is
		// 1. –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
	  // 2. –ü–µ—Ä–µ–¥–∞—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–µ—Ç–æ–¥ writeData
    // –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (wrappee).

	method readData(): data is
		// 1. –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –º–µ—Ç–æ–¥–∞ readData –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ
    // –æ–±—ä–µ–∫—Ç–∞ (wrappee).
    // 2. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏—Ö, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã.
    // 3. –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

// –î–µ–∫–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–æ–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–æ –∏ —É–∂–µ
// –æ–±—ë—Ä–Ω—É—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã.
class CompressionDecorator extends DataSourceDecorator is
	method writeData(data) is
		// 1. –ó–∞–ø–∞–∫–æ–≤–∞—Ç—å –ø–æ–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
    // 2. –ü–µ—Ä–µ–¥–∞—Ç—å –∑–∞–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–µ—Ç–æ–¥ writeData
    // –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (wrappee).

	method readData(): data is
		// 1. –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –º–µ—Ç–æ–¥–∞ readData –æ–±—ë—Ä–Ω—É—Ç–æ–≥–æ
    // –æ–±—ä–µ–∫—Ç–∞ (wrappee).
    // 2. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏—Ö, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–ø–∞–∫–æ–≤–∞–Ω—ã.
    // 3. –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

// –í–∞—Ä–∏–∞–Ω—Ç 1. –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å–±–æ—Ä–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤.
class Application is
	method dumbUsageExample() is 
		source = new FileDataSource("somefile.dat")
    source.writeData(salaryRecords)
    // –í —Ñ–∞–π–ª –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã —á–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ.

    source = new CompressionDecorator(source)
    source.writeData(salaryRecords)
    // –í —Ñ–∞–π–ª –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã —Å–∂–∞—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ.

    source = new EncryptionDecorator(source)
    // –°–µ–π—á–∞—Å –≤ source –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–≤—è–∑–∫–∞ –∏–∑ —Ç—Ä—ë—Ö –æ–±—ä–µ–∫—Ç–æ–≤:
    // Encryption > Compression > FileDataSource

    source.writeData(salaryRecords)
    // –í —Ñ–∞–π–ª –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã —Å–∂–∞—Ç—ã–µ –∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

// –í–∞—Ä–∏–∞–Ω—Ç 2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫
// –¥–∞–Ω–Ω—ã—Ö. –ö–ª–∞—Å—Å SalaryManager –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ç–æ–º, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ
// –±—É–¥—É—Ç —Å—á–∏—Ç–∞–Ω—ã –∏ –∑–∞–ø–∏—Å–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ. –û–Ω –ø–æ–ª—É—á–∞–µ—Ç —É–∂–µ –≥–æ—Ç–æ–≤—ã–π
// –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö.
class SalaryManager is
	field source: DataSource

	constructor SalaryManager(source: DataSource) { ... }

	method load() is
		return source.readData()

	method save() is
		source.writeData(salaryRecords)
    // ...–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã...

// –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É —Å–æ–±–∏—Ä–∞—Ç—å –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã, –≤
// –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
class ApplicationConfigurator is
	method configurationExample() is
		source = new FileDataSource("salary.dat")
		if (enabledEncryption)
	    source = new EncryptionDecorator(source)
		if (enabledCompression)
	    source =new CompressionDecorator(source)

    logger =new SalaryManager(source)
    salary = logger.load()
  // ...
```