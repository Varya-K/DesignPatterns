# –ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å - Proxy

–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π

**–ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å**¬†‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã-–∑–∞–º–µ–Ω–∏—Ç–µ–ª–∏. –≠—Ç–∏ –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –≤—ã–∑–æ–≤—ã –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É, –ø–æ–∑–≤–æ–ª—è—è —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ¬†*–¥–æ*¬†–∏–ª–∏¬†*–ø–æ—Å–ª–µ*¬†–ø–µ—Ä–µ–¥–∞—á–∏ –≤—ã–∑–æ–≤–∞¬†–æ—Ä–∏–≥–∏–Ω–∞–ª—É.

---

# üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

![image.png](%D0%97%D0%B0%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20-%20Proxy%208cd20d9be9244264bb6ba22139bda28b/image.png)

1. **Service Interface**¬†–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –∏ –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—è. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É, –æ–±—ä–µ–∫—Ç –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–º, –≥–¥–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç —Å–µ—Ä–≤–∏—Å–∞.
2. **Service**¬†—Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ–∑–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
3. **Proxy**¬†—Ö—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç —Å–µ—Ä–≤–∏—Å–∞. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∑–∞—â–∏—Ç—É –∏–ª–∏ –¥—Ä—É–≥–æ–µ), –æ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç –≤—ã–∑–æ–≤—ã –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–∏—Å—É.
    
    –ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∞–º –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞.
    
4. **Client**¬†—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–µ—Ä–≤–∏—Å–∞. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É, –µ–≥–æ –º–æ–∂–Ω–æ ¬´–æ–¥—É—Ä–∞—á–∏—Ç—å¬ª, –ø–æ–¥–º–µ–Ω–∏–≤ –æ–±—ä–µ–∫—Ç —Å–µ—Ä–≤–∏—Å–∞ –æ–±—ä–µ–∫—Ç–æ–º –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—è.

---

# ‚åó –ü—Å–µ–≤–¥–æ–∫–æ–¥

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ¬†**–ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å**¬†–ø–æ–º–æ–≥–∞–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –º–µ—Ö–∞–Ω–∏–∑–º –ª–µ–Ω–∏–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å YouTube.

![image.png](%D0%97%D0%B0%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%20-%20Proxy%208cd20d9be9244264bb6ba22139bda28b/image%201.png)

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –Ω–∞—á–∏–Ω–∞–ª –∑–∞–≥—Ä—É–∑–∫—É –ø–æ —Å–µ—Ç–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤–∏–¥–µ–æ. –ó–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –∂–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É—è –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª—É–∂–µ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, –Ω–æ –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.

```
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
interface ThirdPartyYouTubeLib is
	method listVideos()
	method getVideoInfo(id)
	method downloadVideo(id)

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞. –ú–µ—Ç–æ–¥—ã —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞
// –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç —É YouTube —Ä–∞–∑–ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
// –∑–∞–≤–∏—Å–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–∫–∞–Ω–∞–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è,
// –Ω–æ –∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∞–º–æ–≥–æ YouTube. –ó–Ω–∞—á–∏—Ç, —á–µ–º –±–æ–ª—å—à–µ –±—É–¥–µ—Ç
// –≤—ã–∑–æ–≤–æ–≤ –∫ —Å–µ—Ä–≤–∏—Å—É, —Ç–µ–º –º–µ–Ω–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ–π —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞.
class ThirdPartyYouTubeClass implements ThirdPartyYouTubeLib is
	method listVideos() is
		// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–æ–≤ —Å –ø–æ–º–æ—â—å—é API YouTube.

	method getVideoInfo(id) is
		// –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∫–æ–º-—Ç–æ –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–µ.

	method downloadVideo(id) is
		// –°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ —Å YouTube.

// –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –º–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ YouTube –∏ –Ω–µ
// –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∏—Ö –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è, –ø–æ–∫–∞ –∫–µ—à –Ω–µ —É—Å—Ç–∞—Ä–µ–µ—Ç. –ù–æ –≤–Ω–µ—Å—Ç–∏
// —ç—Ç–æ—Ç –∫–æ–¥ –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∫–ª–∞—Å—Å –Ω–µ–ª—å–∑—è, —Ç–∞–∫ –∫–∞–∫ –æ–Ω
// –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –ü–æ—ç—Ç–æ–º—É –º—ã –ø–æ–º–µ—Å—Ç–∏–º –ª–æ–≥–∏–∫—É
// –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å-–æ–±—ë—Ä—Ç–∫—É. –û–Ω –±—É–¥–µ—Ç –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å
// –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
// –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã—Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å.
class CachedYouTubeClass implements ThirdPartyYouTubeLib is
	private field service: ThirdPartyYouTubeLib
	private field listCache, videoCache
	field needReset

	constructor CachedYouTubeClass(service: ThirdPartyYouTubeLib) is
		this.service = service

	method listVideos() is
		if (listCache == null || needReset)
	    listCache = service.listVideos()
		return listCache

	method getVideoInfo(id) is
		if (videoCache == null || needReset)
	    videoCache = service.getVideoInfo(id)
		return videoCache

	method downloadVideo(id) is
		if (!downloadExists(id) || needReset)
	    service.downloadVideo(id)

// –ö–ª–∞—Å—Å GUI, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–∏—Å–Ω—ã–π –æ–±—ä–µ–∫—Ç. –í–º–µ—Å—Ç–æ
// —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –º—ã –ø–æ–¥—Å—É–Ω–µ–º –µ–º—É –æ–±—ä–µ–∫—Ç-–∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å. –ö–ª–∏–µ–Ω—Ç
// –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç, —Ç–∞–∫ –∫–∞–∫ –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ç–æ—Ç –∂–µ
// –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —á—Ç–æ –∏ —Å–µ—Ä–≤–∏—Å.
class YouTubeManager is 
	protected field service: ThirdPartyYouTubeLib

	constructor YouTubeManager(service: ThirdPartyYouTubeLib) is
		this.service = service

	method renderVideoPage(id) is
		info = service.getVideoInfo(id)
    // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–∞.

	method renderListPanel() is
		list = service.listVideos()
    // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–≤—å—é—à–µ–∫ –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–æ–≤.

	method reactOnUserInput() is
		renderVideoPage()
    renderListPanel()

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞—ë—Ç –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–ª–∏–µ–Ω—Ç–∞–º
// –æ–±—ä–µ–∫—Ç –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—è.
class Application is
	method init()is
		YouTubeService =new ThirdPartyYouTubeClass()
    YouTubeProxy =new CachedYouTubeClass(YouTubeService)
    manager =new YouTubeManager(YouTubeProxy)
    manager.reactOnUserInput()
```