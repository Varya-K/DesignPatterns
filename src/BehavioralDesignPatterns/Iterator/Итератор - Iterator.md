# –ò—Ç–µ—Ä–∞—Ç–æ—Ä - Iterator

–ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π

**–ò—Ç–µ—Ä–∞—Ç–æ—Ä**¬†‚Äî —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ–±—Ö–æ–¥–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—è –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ¬†–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

---

# üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

![image](https://github.com/user-attachments/assets/dd062c42-d2d8-48b4-8bc4-6200e54ef02c)


1. **Iterator**¬†–æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏ –æ–±—Ö–æ–¥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
2. **Concrete Iterator**¬†—Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ö–æ–¥–∞ –∫–∞–∫–æ–π-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –û–±—ä–µ–∫—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –¥–æ–ª–∂–µ–Ω —Å–∞–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –æ–±—Ö–æ–¥–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, —á—Ç–æ–±—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥–ª–∏ –æ–±—Ö–æ–¥–∏—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.
3. **Iterable Collection**¬†–æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –ö–∞–∫ –º—ã —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–∏, –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ —è–≤–ª—è—é—Ç—Å—è —Å–ø–∏—Å–∫–æ–º. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–µ API, –∏ –¥–∞–∂–µ –¥–µ—Ä–µ–≤–æ¬†**–ö–æ–º–ø–æ–Ω–æ–≤—â–∏–∫–∞**. –ü–æ—ç—Ç–æ–º—É —Å–∞–º–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã —Å–ø–æ—Å–æ–±–Ω—ã —Å –Ω–µ–π —Ä–∞–±–æ—Ç–∞—Ç—å.
4. **Concrete Collection**¬†–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞, —Å–≤—è–∑–∞–≤ –µ–≥–æ —Å —Ç–µ–∫—É—â–∏–º –æ–±—ä–µ–∫—Ç–æ–º –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤.
5. **Client**¬†—Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞. –¢–∞–∫ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –Ω–µ –∏–∑–º–µ–Ω—è—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã.
    
    –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç –æ–±—ä–µ–∫—Ç—ã –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∞ –ø–æ–ª—É—á–∞—é—Ç –∏—Ö –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–π. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—É —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –æ–Ω –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.
    
    ---
    

# ‚åó –ü—Å–µ–≤–¥–æ–∫–æ–¥

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø–∞—Ç—Ç–µ—Ä–Ω¬†**–ò—Ç–µ—Ä–∞—Ç–æ—Ä**¬†–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—Ö–æ–¥–∞ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–º—É –≥—Ä–∞—Ñ—É Facebook. –ö–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É –æ–±—Ö–æ–¥–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –ª—é–¥–µ–π.

![image 1](https://github.com/user-attachments/assets/61f6f3b5-7500-4717-9a91-444cd60c52d2)


–¢–∞–∫, –∏—Ç–µ—Ä–∞—Ç–æ—Ä –¥—Ä—É–∑–µ–π –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π –ø—Ä–æ—Ñ–∏–ª—è, –∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä –∫–æ–ª–ª–µ–≥ ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥—Ä—É–∑–µ–π –ø–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –∫–æ–º–ø–∞–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è. –í—Å–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏, –Ω–µ –≤–Ω–∏–∫–∞—è –≤ –¥–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –æ—Ç–ø—Ä–∞–≤–∫—É REST-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ç. –¥.)

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ò—Ç–µ—Ä–∞—Ç–æ—Ä –∏–∑–±–∞–≤–ª—è–µ—Ç –∫–æ–¥ –æ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–ª–∞—Å—Å–∞–º –∫–æ–ª–ª–µ–∫—Ü–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥—Ä—É–≥–æ–≥–æ –≤–∏–¥–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, LinkedIn), –Ω–µ –º–µ–Ω—è—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏.

```
// –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–ª–ª–µ–∫—Ü–∏–π –¥–æ–ª–∂–µ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥
// –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞. –ú–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ
// –º–µ—Ç–æ–¥–æ–≤, —á—Ç–æ–±—ã –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—Ö–æ–¥–∞
// –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
interface SocialNetwork is
	method createFriendsIterator(profileId):ProfileIterator
	method createCoworkersIterator(profileId):ProfileIterator

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –∑–Ω–∞–µ—Ç, –æ–±—ä–µ–∫—Ç—ã –∫–∞–∫–∏—Ö –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤ –Ω—É–∂–Ω–æ
// —Å–æ–∑–¥–∞–≤–∞—Ç—å.
class Facebook implements SocialNetwork is
	// ...–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –∫–æ–ª–ª–µ–∫—Ü–∏–∏...

  // –ö–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.
	method createFriendsIterator(profileId) is
		return new FacebookIterator(this, profileId, "friends")
	method createCoworkersIterator(profileId) is
		return new FacebookIterator(this, profileId, "coworkers")

// –û–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤.
interface ProfileIterator is
	method getNext():Profile
	method hasMore():bool

// –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä.
class FacebookIterator implements ProfileIterator is
	// –ò—Ç–µ—Ä–∞—Ç–æ—Ä—É –Ω—É–∂–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –æ–Ω –æ–±—Ö–æ–¥–∏—Ç.
	private field facebook: Facebook
	private field profileId, type: string

  // –ù–æ –∫–∞–∂–¥—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä –æ–±—Ö–æ–¥–∏—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç
  // –æ—Å—Ç–∞–ª—å–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π
  // –ø–æ–∑–∏—Ü–∏–∏ –æ–±—Ö–æ–¥–∞.
	private field currentPosition
	private field cache: array of Profile

	constructor FacebookIterator(facebook, profileId, type) is
		this.facebook = facebook
		this.profileId = profileId
		this.type = type

	private method lazyInit() is
		if (cache ==null)
	    cache = facebook.socialGraphRequest(profileId, type)

	// –ò—Ç–µ—Ä–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥—ã –±–∞–∑–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ-—Å–≤–æ–µ–º—É.
	method getNext() is
		if (hasMore())
	    result = cache[currentPosition]
	    currentPosition++
			return result

	method hasMore() is
		lazyInit()
		return currentPosition < cache.length

// –í–æ—Ç –µ—â—ë –ø–æ–ª–µ–∑–Ω–∞—è —Ç–∞–∫—Ç–∏–∫–∞: –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç
// –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –≤–º–µ—Å—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã. –ü—Ä–∏ —Ç–∞–∫–æ–º
// –ø–æ–¥—Ö–æ–¥–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º, –∞
// –∑–Ω–∞—á–∏—Ç, –µ–≥–æ –Ω–µ –±—É–¥—É—Ç –≤–æ–ª–Ω–æ–≤–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π. –ï–º—É
// –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤.
class SocialSpammer is
	method send(iterator: ProfileIterator, message: string) is
		while (iterator.hasMore())
	    profile = iterator.getNext()
      System.sendEmail(profile.getEmail(), message)

// –ö–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å—ã, –∫–∞–∫ –∑–∞—Ö–æ—á–µ—Ç.
class Application is 
	field network: SocialNetwork
	field spammer: SocialSpammer

	method config() is
		if working with Facebook
			this.network =new Facebook()
		if working with LinkedIn
			this.network =new LinkedIn()
			this.spammer =new SocialSpammer()

	method sendSpamToFriends(profile) is 
		iterator = network.createFriendsIterator(profile.getId())
	  spammer.send(iterator, "Very important message")

	method sendSpamToCoworkers(profile) is
		iterator = network.createCoworkersIterator(profile.getId())
    spammer.send(iterator, "Very important message")
```
